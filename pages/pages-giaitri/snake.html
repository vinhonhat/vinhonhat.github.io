<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tr√≤ Ch∆°i R·∫Øn SƒÉn M·ªìi | Vinh ·ªü Nh·∫≠t</title>
    
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#F6AD55">
    <link rel="apple-touch-icon" href="../img/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">

    <style>
        /* CSS t·ªëi gi·∫£n ƒë·ªÉ cƒÉn gi·ªØa n·ªôi dung ch√≠nh */
        main {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            flex-grow: 1;
        }
        canvas {
            background-color: #1a202c; /* T∆∞∆°ng ƒë∆∞∆°ng bg-gray-900 c·ªßa Tailwind */
            border: 2px solid #4a5568; /* T∆∞∆°ng ƒë∆∞∆°ng border-gray-700 */
        }
    </style>
</head>
<body class="bg-[#FBF7F0] flex flex-col min-h-screen">
    <div id="popupOverlay" class="popup-overlay">
        <div class="popup-content">
            <button id="closePopupBtn" class="absolute top-2 right-4 text-2xl text-gray-400 hover:text-gray-600">&times;</button>
            <img id="holidayImage" src="" alt="H√¨nh ·∫£nh ng√†y l·ªÖ" class="max-h-40 mx-auto mb-4 rounded-lg hidden">
            <h2 id="popupTitle" class="text-2xl font-bold mb-2 text-gray-800"></h2>
            <p id="popupText" class="text-gray-600 mb-6"></p>
        </div>
    </div>

    <header class="bg-white shadow-sm py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <a href="../index.html" class="flex items-center space-x-2">
                <img src="../img/logo.png" onerror="this.onerror=null; this.src='https://placehold.co/40x40/F6AD55/ffffff?text=V';" alt="Logo" class="h-12 w-12 rounded-full">
                <span class="text-xl font-bold text-gray-800 hidden sm:block">Vinh ·ªü Nh·∫≠t</span>
            </a>
            <div class="flex items-center space-x-4">
                <div class="text-right time-display">
                    <div id="time" class="time text-3xl font-bold leading-none">00:00:00</div>
                    <div id="date" class="date text-sm mt-1">...</div>
                </div>
                <div class="sm:hidden">
                    <button id="menu-toggle" class="text-gray-700 hover:text-yellow-600"><i class="fas fa-bars text-2xl"></i></button>
                </div>
            </div>
        </div>
    </header>

    <nav class="bg-white shadow-sm mt-4 sticky top-0 z-50">
        <div class="container mx-auto px-4 py-2">
            <ul class="hidden sm:flex justify-center sm:justify-between items-center space-x-4">
                <li class="relative group">
                    <a href="#" class="menu-link hover:text-yellow-600 flex items-center">B√†i vi·∫øt HD<i class="fas fa-chevron-down ml-2 text-xs"></i></a>
                    <ul class="absolute hidden group-hover:block bg-white shadow-lg rounded-md mt-2 py-2 w-40 z-10 dropdown-menu">
                        <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-yellow-100">Rakuten</a></li>
                        <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-yellow-100">Seven</a></li>
                        <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-yellow-100">Baito</a></li>
                        <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-yellow-100">Sim th·∫ª</a></li>
                    </ul>
                </li>
                <li><a href="#" class="menu-link hover:text-yellow-600">Video h∆∞·ªõng d·∫´n</a></li>
                <li><a href="#" class="menu-link hover:text-yellow-600">T·∫£i ·ª©ng d·ª•ng</a></li>
                <li><a href="#" class="menu-link hover:text-yellow-600">H·ªçc t·∫≠p</a></li>
                <li><a href="#" class="menu-link hover:text-yellow-600">Gi·∫£i tr√≠</a></li>
            </ul>
            <div id="mobile-menu" class="hidden sm:hidden absolute left-0 w-full bg-white shadow-lg py-4">
                <ul class="flex flex-col items-center space-y-4">
                    <li><a href="#" class="menu-link">H·ªçc t·∫≠p</a></li>
                    <li><a href="#" class="menu-link">Gi·∫£i tr√≠</a></li>
                    <li><a href="#" class="menu-link">B√†i vi·∫øt HD</a></li>
                    <li><a href="#" class="menu-link">Video h∆∞·ªõng d·∫´n</a></li>
                    <li><a href="#" class="menu-link">T·∫£i ·ª©ng d·ª•ng</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <main class="container mx-auto px-4 mt-8">
        <div class="text-center">
            <h1 class="text-3xl font-bold mb-4 text-gray-800">üêç R·∫Øn SƒÉn M·ªìi üêç</h1>
            <p class="mb-4 text-gray-600">S·ª≠ d·ª•ng ph√≠m m≈©i t√™n (m√°y t√≠nh) ho·∫∑c vu·ªët (di ƒë·ªông) ƒë·ªÉ ƒëi·ªÅu khi·ªÉn.</p>
            <canvas id="gameCanvas" width="320" height="320"></canvas>
            <div id="score" class="mt-4 text-2xl font-bold text-gray-800">ƒêi·ªÉm: 0</div>
            <div id="gameOverText" class="text-red-500 text-xl font-bold mt-2 h-7"></div>
        </div>
    </main>
    
    <footer class="bg-gray-800 text-white mt-12 py-8">
        <div class="container mx-auto px-4 text-center">
            <div class="flex justify-center space-x-6 mb-6">
                <a href="http://fb.com/tqv2022" class="social-icon text-gray-400 hover:text-white text-2xl"><i class="fab fa-facebook"></i></a>
                <a href="https://m.me/tqv2022" class="social-icon text-gray-400 hover:text-white text-2xl"><i class="fa-brands fa-facebook-messenger"></i></a>
                <a href="https://www.tiktok.com/@tqv2020" class="social-icon text-gray-400 hover:text-white text-2xl"><i class="fab fa-tiktok"></i></a>
                <a href="https://portal.mobile.rakuten.co.jp/my-rakuten-mobile" class="social-icon text-gray-400 hover:text-white text-2xl"><i class="fa-solid fa-r"></i></a>
            </div>
            <p class="text-gray-400 max-w-2xl mx-auto mb-6">
                ƒê√¢y l√† n∆°i chia s·∫ª ki·∫øn th·ª©c, kinh nghi·ªám v·ªÅ h·ªçc t·∫≠p, gi·∫£i tr√≠ v√† c√°c h∆∞·ªõng d·∫´n h·ªØu √≠ch. M·ª•c ti√™u c·ªßa ch√∫ng t√¥i l√† mang ƒë·∫øn nh·ªØng th√¥ng tin ch·∫•t l∆∞·ª£ng v√† b·ªï √≠ch cho c·ªông ƒë·ªìng.
            </p>
            <p class="text-gray-500 text-sm">&copy; 2025 Vinh ·ªü Nh·∫≠t. All rights reserved.</p>
        </div>
    </footer>

    <script src="../js/lunar-calendar.js"></script>
    <script src="../js/holidays.js"></script>
    <script src="../js/proverbs.js"></script>
    <script src="../js/content.js"></script> 
    <script src="../js/script.js"></script>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const gameOverText = document.getElementById('gameOverText');

        const gridSize = 20;
        const canvasSize = canvas.width;
        const tileCount = canvasSize / gridSize;

        let snake = [{ x: 10, y: 10 }];
        let food = {};
        let direction = 'right';
        let score = 0;
        let gameOver = false;
        let gameInterval = null;

        function startGame() {
            snake = [{ x: 10, y: 10 }];
            direction = 'right';
            score = 0;
            gameOver = false;
            gameOverText.textContent = '';
            scoreElement.textContent = 'ƒêi·ªÉm: 0';
            generateFood();

            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(gameLoop, 120); // T·ªëc ƒë·ªô game
        }

        function generateFood() {
            food = {
                x: Math.floor(Math.random() * tileCount),
                y: Math.floor(Math.random() * tileCount)
            };
            // ƒê·∫£m b·∫£o m·ªìi kh√¥ng xu·∫•t hi·ªán tr√™n th√¢n r·∫Øn
            snake.forEach(segment => {
                if (segment.x === food.x && segment.y === food.y) {
                    generateFood();
                }
            });
        }

        function draw() {
            // V·∫Ω n·ªÅn
            ctx.fillStyle = '#1a202c'; // bg-gray-900
            ctx.fillRect(0, 0, canvasSize, canvasSize);

            // V·∫Ω r·∫Øn
            ctx.fillStyle = '#48bb78'; // green-500
            snake.forEach(segment => {
                ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);
            });

            // V·∫Ω m·ªìi
            ctx.fillStyle = '#f56565'; // red-500
            ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2);
        }

        function update() {
            if (gameOver) return;

            const head = { x: snake[0].x, y: snake[0].y };

            // C·∫≠p nh·∫≠t v·ªã tr√≠ ƒë·∫ßu r·∫Øn d·ª±a tr√™n h∆∞·ªõng di chuy·ªÉn
            if (direction === 'up') head.y--;
            if (direction === 'down') head.y++;
            if (direction === 'left') head.x--;
            if (direction === 'right') head.x++;

            // Ki·ªÉm tra va ch·∫°m t∆∞·ªùng
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                endGame();
                return;
            }
            
            // Ki·ªÉm tra t·ª± c·∫Øn
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    endGame();
                    return;
                }
            }

            snake.unshift(head);

            // Ki·ªÉm tra ƒÉn m·ªìi
            if (head.x === food.x && head.y === food.y) {
                score++;
                scoreElement.textContent = 'ƒêi·ªÉm: ' + score;
                generateFood();
            } else {
                snake.pop();
            }
        }

        function gameLoop() {
            update();
            draw();
        }

        function endGame() {
            gameOver = true;
            clearInterval(gameInterval);
            gameOverText.textContent = 'THUA! Nh·∫•n F5 ƒë·ªÉ ch∆°i l·∫°i.';
        }

        // ƒêi·ªÅu khi·ªÉn b·∫±ng b√†n ph√≠m
        document.addEventListener('keydown', e => {
            if ((e.key === 'ArrowUp' || e.key === 'w') && direction !== 'down') direction = 'up';
            if ((e.key === 'ArrowDown' || e.key === 's') && direction !== 'up') direction = 'down';
            if ((e.key === 'ArrowLeft' || e.key === 'a') && direction !== 'right') direction = 'left';
            if ((e.key === 'ArrowRight' || e.key === 'd') && direction !== 'left') direction = 'right';
        });

        // ƒêi·ªÅu khi·ªÉn b·∫±ng c·∫£m ·ª©ng vu·ªët (cho di ƒë·ªông)
        let touchStartX = 0, touchStartY = 0;
        canvas.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }, false);

        canvas.addEventListener('touchend', e => {
            let touchEndX = e.changedTouches[0].screenX;
            let touchEndY = e.changedTouches[0].screenY;
            handleSwipe(touchStartX, touchStartY, touchEndX, touchEndY);
        }, false);
        
        function handleSwipe(startX, startY, endX, endY) {
            const dx = endX - startX;
            const dy = endY - startY;
            const absDx = Math.abs(dx);
            const absDy = Math.abs(dy);

            if (absDx > absDy) { // Vu·ªët ngang
                if (dx > 0 && direction !== 'left') direction = 'right';
                else if (dx < 0 && direction !== 'right') direction = 'left';
            } else { // Vu·ªët d·ªçc
                if (dy > 0 && direction !== 'up') direction = 'down';
                else if (dy < 0 && direction !== 'down') direction = 'up';
            }
        }
        
        // B·∫Øt ƒë·∫ßu game khi t·∫£i trang
        startGame();
    </script>
</body>
</html>